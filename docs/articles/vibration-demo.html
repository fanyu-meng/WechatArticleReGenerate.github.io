<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼¦æŒ¯åŠ¨äº¤äº’æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            color: #34495e;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .input-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            border: none;
        }
        
        .value-display {
            min-width: 60px;
            padding: 5px 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .canvas-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: #1a1a2e;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .info-panel {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            margin-top: 20px;
        }
        
        .info-panel h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .info-panel p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 8px;
        }
        
        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .preset-btn {
            padding: 8px 16px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .preset-btn:hover {
            background: #2980b9;
        }
        
        .play-btn {
            padding: 12px 30px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto;
        }
        
        .play-btn:hover {
            background: #229954;
            transform: scale(1.05);
        }
        
        .play-btn:active {
            transform: scale(0.98);
        }
        
        .play-btn.playing {
            background: #e74c3c;
        }
        
        .play-btn.playing:hover {
            background: #c0392b;
        }
        
        .back-link {
            margin-bottom: 20px;
        }
        
        .back-link a {
            color: #3498db;
            text-decoration: none;
            font-size: 0.9em;
        }
        
        .back-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="what-is-acoustics.html">â† è¿”å›æ–‡ç« </a>
        </div>
        
        <h1>ğŸµ å¼¦æŒ¯åŠ¨äº¤äº’æ¼”ç¤º</h1>
        <p class="subtitle">é€šè¿‡è°ƒæ•´é¢‘ç‡å’ŒæŒ¯å¹…ï¼Œè§‚å¯Ÿå¼¦æŒ¯åŠ¨çš„å˜åŒ–</p>
        
        <div class="controls">
            <div class="control-group">
                <label>é¢‘ç‡ (Hz): <span id="freq-label">440</span></label>
                <div class="input-wrapper">
                    <input type="range" id="frequency" min="100" max="1000" value="440" step="10">
                    <span class="value-display" id="freq-value">440 Hz</span>
                </div>
                <small style="color: #7f8c8d; margin-top: 5px;">é¢‘ç‡è¶Šé«˜ï¼ŒæŒ¯åŠ¨è¶Šå¿«</small>
            </div>
            
            <div class="control-group">
                <label>æŒ¯å¹… (å¼ºåº¦): <span id="amp-label">50</span>%</label>
                <div class="input-wrapper">
                    <input type="range" id="amplitude" min="10" max="100" value="50" step="5">
                    <span class="value-display" id="amp-value">50%</span>
                </div>
                <small style="color: #7f8c8d; margin-top: 5px;">æŒ¯å¹…è¶Šå¤§ï¼ŒæŒ¯åŠ¨å¹…åº¦è¶Šå¤§</small>
            </div>
        </div>
        
        <div class="preset-buttons">
            <button class="preset-btn" onclick="setPreset(261.63, 50)">C4 (ä¸­å¤®C)</button>
            <button class="preset-btn" onclick="setPreset(329.63, 50)">E4</button>
            <button class="preset-btn" onclick="setPreset(440, 50)">A4 (æ ‡å‡†éŸ³)</button>
            <button class="preset-btn" onclick="setPreset(523.25, 50)">C5</button>
            <button class="preset-btn" onclick="setPreset(880, 50)">A5 (é«˜å…«åº¦)</button>
        </div>
        
        <button id="playBtn" class="play-btn" onclick="toggleSound()">
            <span id="playIcon">â–¶</span>
            <span id="playText">æ’­æ”¾å£°éŸ³</span>
        </button>
        
        <div class="canvas-container">
            <canvas id="vibrationCanvas"></canvas>
        </div>
        
        <div class="info-panel">
            <h3>ğŸ“š ä»€ä¹ˆæ˜¯æŒ¯åŠ¨å’Œé¢‘ç‡ï¼Ÿ</h3>
            <p><strong>æŒ¯åŠ¨</strong>ï¼šç‰©ä½“å›´ç»•å¹³è¡¡ä½ç½®åšå‘¨æœŸæ€§å¾€å¤è¿åŠ¨ã€‚å°±åƒä½ çœ‹åˆ°çš„å¼¦ï¼Œå®ƒåœ¨å¹³è¡¡ä½ç½®ï¼ˆæ°´å¹³çº¿ï¼‰ä¸Šä¸‹æ‘†åŠ¨ã€‚</p>
            <p><strong>é¢‘ç‡</strong>ï¼šå•ä½æ—¶é—´å†…å®ŒæˆæŒ¯åŠ¨çš„æ¬¡æ•°ï¼Œå•ä½æ˜¯èµ«å…¹ï¼ˆHzï¼‰ã€‚é¢‘ç‡è¶Šé«˜ï¼ŒæŒ¯åŠ¨è¶Šå¿«ï¼Œå£°éŸ³è¶Šé«˜ã€‚ç‚¹å‡»"æ’­æ”¾å£°éŸ³"æŒ‰é’®ï¼Œä½ å¯ä»¥å¬åˆ°å¯¹åº”é¢‘ç‡çš„å£°éŸ³ï¼</p>
            <p><strong>æŒ¯å¹…</strong>ï¼šæŒ¯åŠ¨çš„æœ€å¤§ä½ç§»ã€‚æŒ¯å¹…è¶Šå¤§ï¼ŒæŒ¯åŠ¨çš„å¹…åº¦è¶Šå¤§ï¼Œå£°éŸ³è¶Šå“ã€‚è°ƒæ•´æŒ¯å¹…æ»‘å—æ—¶ï¼Œå¦‚æœæ­£åœ¨æ’­æ”¾å£°éŸ³ï¼Œä½ ä¼šå¬åˆ°éŸ³é‡å˜åŒ–ã€‚</p>
            <p><strong>å¼¦æŒ¯åŠ¨</strong>ï¼šå½“å¼¦è¢«æ‹¨åŠ¨æ—¶ï¼Œä¼šäº§ç”Ÿé©»æ³¢ï¼ˆstanding waveï¼‰ï¼Œå½¢æˆç‰¹å®šçš„æŒ¯åŠ¨æ¨¡å¼ã€‚ä¸åŒçš„é¢‘ç‡å¯¹åº”ä¸åŒçš„éŸ³é«˜ã€‚440 Hz æ˜¯æ ‡å‡†éŸ³ A4ï¼Œä¹Ÿæ˜¯ç®¡å¼¦ä¹é˜Ÿè°ƒéŸ³çš„æ ‡å‡†ã€‚</p>
            <p><strong>ğŸ’¡ æç¤º</strong>ï¼šè°ƒæ•´é¢‘ç‡æ»‘å—æ—¶ï¼Œå¦‚æœæ­£åœ¨æ’­æ”¾å£°éŸ³ï¼ŒéŸ³é«˜ä¼šå®æ—¶å˜åŒ–ã€‚è¯•è¯•ä»ä½é¢‘ç‡ï¼ˆ100 Hzï¼‰æ…¢æ…¢è°ƒåˆ°é«˜é¢‘ç‡ï¼ˆ1000 Hzï¼‰ï¼Œæ„Ÿå—éŸ³é«˜çš„å˜åŒ–ï¼</p>
        </div>
    </div>
    
    <script>
        const canvas = document.getElementById('vibrationCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®canvaså°ºå¯¸
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // æ§åˆ¶å‚æ•°
        let frequency = 440; // Hz
        let amplitude = 50; // ç™¾åˆ†æ¯”
        let time = 0;
        
        // Web Audio API
        let audioContext = null;
        let oscillator = null;
        let gainNode = null;
        let isPlaying = false;
        
        // åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼ˆéœ€è¦ç”¨æˆ·äº¤äº’åï¼‰
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
            }
        }
        
        // æ’­æ”¾/åœæ­¢å£°éŸ³
        function toggleSound() {
            if (!isPlaying) {
                startSound();
            } else {
                stopSound();
            }
        }
        
        function startSound() {
            initAudio();
            
            // å¦‚æœéŸ³é¢‘ä¸Šä¸‹æ–‡è¢«æš‚åœï¼ˆæµè§ˆå™¨ç­–ç•¥ï¼‰ï¼Œæ¢å¤å®ƒ
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            // åˆ›å»ºæŒ¯è¡å™¨
            oscillator = audioContext.createOscillator();
            oscillator.type = 'sine'; // æ­£å¼¦æ³¢ï¼Œç±»ä¼¼å¼¦æŒ¯åŠ¨
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            
            // è®¾ç½®éŸ³é‡ï¼ˆæ ¹æ®æŒ¯å¹…ï¼‰
            const volume = amplitude / 100 * 0.3; // æœ€å¤§éŸ³é‡30%ï¼Œé¿å…å¤ªå“
            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            
            // è¿æ¥å¹¶æ’­æ”¾
            oscillator.connect(gainNode);
            oscillator.start();
            
            isPlaying = true;
            updatePlayButton();
        }
        
        function stopSound() {
            if (oscillator) {
                oscillator.stop();
                oscillator.disconnect();
                oscillator = null;
            }
            isPlaying = false;
            updatePlayButton();
        }
        
        function updatePlayButton() {
            const btn = document.getElementById('playBtn');
            const icon = document.getElementById('playIcon');
            const text = document.getElementById('playText');
            
            if (isPlaying) {
                btn.classList.add('playing');
                icon.textContent = 'â¸';
                text.textContent = 'åœæ­¢å£°éŸ³';
            } else {
                btn.classList.remove('playing');
                icon.textContent = 'â–¶';
                text.textContent = 'æ’­æ”¾å£°éŸ³';
            }
        }
        
        // æ›´æ–°é¢‘ç‡æ—¶åŒæ­¥éŸ³é¢‘
        function updateFrequency(newFreq) {
            frequency = newFreq;
            if (oscillator && isPlaying) {
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            }
        }
        
        // æ›´æ–°æŒ¯å¹…æ—¶åŒæ­¥éŸ³é¢‘
        function updateAmplitude(newAmp) {
            amplitude = newAmp;
            if (gainNode && isPlaying) {
                const volume = amplitude / 100 * 0.3;
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            }
        }
        
        // è·å–æ§åˆ¶å…ƒç´ 
        const freqSlider = document.getElementById('frequency');
        const ampSlider = document.getElementById('amplitude');
        const freqValue = document.getElementById('freq-value');
        const freqLabel = document.getElementById('freq-label');
        const ampValue = document.getElementById('amp-value');
        const ampLabel = document.getElementById('amp-label');
        
        // æ›´æ–°é¢‘ç‡
        freqSlider.addEventListener('input', (e) => {
            const newFreq = parseFloat(e.target.value);
            updateFrequency(newFreq);
            freqValue.textContent = newFreq + ' Hz';
            freqLabel.textContent = newFreq;
        });
        
        // æ›´æ–°æŒ¯å¹…
        ampSlider.addEventListener('input', (e) => {
            const newAmp = parseFloat(e.target.value);
            updateAmplitude(newAmp);
            ampValue.textContent = newAmp + '%';
            ampLabel.textContent = newAmp;
        });
        
        // é¢„è®¾æŒ‰é’®
        function setPreset(freq, amp) {
            updateFrequency(freq);
            updateAmplitude(amp);
            freqSlider.value = freq;
            ampSlider.value = amp;
            freqValue.textContent = freq + ' Hz';
            freqLabel.textContent = freq;
            ampValue.textContent = amp + '%';
            ampLabel.textContent = amp;
        }
        
        // ç»˜åˆ¶å‡½æ•°
        function draw() {
            // æ¸…ç©ºç”»å¸ƒ
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            const centerY = canvas.height / 2;
            const stringLength = canvas.width - 100;
            const startX = 50;
            const endX = startX + stringLength;
            
            // è®¡ç®—å®é™…æŒ¯å¹…ï¼ˆåƒç´ ï¼‰
            const actualAmplitude = (amplitude / 100) * 80;
            
            // ç»˜åˆ¶å¹³è¡¡ä½ç½®å‚è€ƒçº¿
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(startX, centerY);
            ctx.lineTo(endX, centerY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶å¼¦çš„æŒ¯åŠ¨
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            const points = 200;
            for (let i = 0; i <= points; i++) {
                const x = startX + (i / points) * stringLength;
                const position = i / points; // 0 åˆ° 1
                
                // è®¡ç®—é©»æ³¢æ¨¡å¼ï¼ˆä¸¤ç«¯å›ºå®šï¼‰
                const wave = Math.sin(Math.PI * position) * Math.sin(2 * Math.PI * frequency * time / 1000);
                const y = centerY + wave * actualAmplitude;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
            
            // ç»˜åˆ¶å›ºå®šç‚¹
            ctx.fillStyle = '#e74c3c';
            ctx.beginPath();
            ctx.arc(startX, centerY, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(endX, centerY, 6, 0, Math.PI * 2);
            ctx.fill();
            
            // ç»˜åˆ¶æŒ¯å¹…æŒ‡ç¤ºå™¨
            ctx.strokeStyle = '#95a5a6';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(endX + 20, centerY - actualAmplitude);
            ctx.lineTo(endX + 20, centerY + actualAmplitude);
            ctx.stroke();
            
            // ç»˜åˆ¶é¢‘ç‡æŒ‡ç¤ºï¼ˆæ³¢å½¢å¯†åº¦ï¼‰
            ctx.fillStyle = 'rgba(52, 152, 219, 0.3)';
            const waveCount = Math.floor(frequency / 100);
            for (let i = 0; i < waveCount && i < 10; i++) {
                const x = startX + (i / 10) * stringLength;
                ctx.beginPath();
                ctx.arc(x, centerY, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // æ›´æ–°æ—¶é—´
            time += 16; // çº¦60fps
            
            requestAnimationFrame(draw);
        }
        
        // å¼€å§‹åŠ¨ç”»
        draw();
    </script>
</body>
</html>
